<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><mf-text><![CDATA[
<!-- Markfront header -->

                  **Markfront Reference Manual**

This document describes the features supported by Markfront.

# Markfront Text

## Hyperlinks

### Normal hyperlinks

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Markdown
[This](https://www.example.com) is a normal Markdown hyperlink.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

### Symbolic hyperlinks

Link targets can be placed out-of-text:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Markdown
[**This**][] is a symbolic hyperlink with an implied symbol name.

[This][example] is a symbolic hyperlink with an explicit symbol name.
ALso, notice that the link target can span across multiple lines.
All link breaks within a link target are removed.

[**This**]:  https://www.example.com
[example]:   https://
             www.example.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Symbol names are case-sensitive.

A link target definition is only associated with the closest preceding symbolic
hyperlink. A symbolic hyperlink is associated with a link target definition
only if:

- The hyperlink precedes the link target definition.
- There is no hyperlink or link target definiton with an identical symbol name
  between the hyperlink and the link target definition.

A symbolic hyperlink is not formed if no link target could be associated.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Markdown
[This][example] is not a hyperlink and is displayed as `[This][example]`.

[This][example] is a hyperlink.

[example]: https://www.example.com
[example]: https://www.example.com/this-link-target-definition-is-ignored
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The association cannot be formed across the boundaries of `<mf-text>`.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ XML
<mf-text>
[This][example] is not a hyperlink and is displayed as `[This][example]`.
</mf-text>
<mf-text>
[example]: https://www.example.com
</mf-text>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

## Images

!!! TODO: Yet to be written about...

    - Full width images
    - How is the text inside `![this text](...)` handled?

## Floating contents

Figures and sidenotes use a (somewhat) unified syntax:

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Markdown
Let there be some paragraph text[^sidenote].
See [^Figure fig1] as well as [!Table table]. [!図:fig2]も併せてご覧下さい。
.i ko zgana [!le pixra pe li mupli-pixra]

[^sidenote]: Here comes the sidenote.
    Sidenotes are different from figures in the point that
    the first line is not treated specially as a caption.

[^Figure fig1]: Twily for dummies.
    ![](https://derpicdn.net/img/2013/8/4/391426/large.png)

[!Table table]:
    Since the caption line was left empty, this table has no caption.

    | Elements of Harmony | Pillars of Old Equestria |
    |---------------------|--------------------------|
    | Honesty             | Strength                 |
    | Kindness            | Healing                  |
    | Laughter            | Hope                     |
    | Generosity          | Beauty                   |
    | Loyalty             | Bravery                  |
    | Magic               | Sorcery                  |

[!図:fig2]: Yay.
    ![](https://derpicdn.net/img/2018/8/18/1809969/large.png)

[!le pixra pe li mupli-pixra]: Empty figure.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The part surrounded by brackets is called a *label*. A label consists of the following components:

- A preceding `^` (caret) or `!` (exclamation mark) symbol specifies whether the contents should be displayed as a sidenote or not.

- An optional number prefix. This serves the purpose of identifying an independent counter for each figure type (e.g., figure/table), and as a text to be displayed before a number. There are two forms:

    - The space-delimited form like `[^Figure fig]` inserts a whitespace between the prefix and a number.
    - The non-space-delimited form like `[^図:fig]` does not insert a whitespace.

  This component is included in the floating element ID along with the base name.

- A non-empty base name.

  A base name may not include `:` or a whitespace character. Therefore, a label `[^le pixra pe li mupli-pixra]` is interpreted as `le pixra pe li` + `mupli-pixra`[^jbopixra].

A label not including a preceding symbol like `[this is a mere link or not]` is not treated as a floating element label but rather as a potential normal link.

The number prefix and the base name together forms a label identifier.

!!! Tip
    The preceding `^` and `!` symbol does not participate in the label identifier. so it's technically possible to refer to a figure with a different symbol. However, it's considered a bad practice because it makes it harder to find a tag using a text editor's search functionality.

!!! Note: Differences from Markdeep
    - Figures are merged into sidenotes and use the same syntax.
    - Like Markdeep, sidenotes may contain multiple lines, but they must be indented to be included.
    - Sidenotes can contain multiple paragraphs.

!!! TODO: Yet to be written about...
    - Citations (e.g., `[#Kajiya86]`).
    - Find a way to place table captions above tables but not figure captions.

The following table summarises all forms of labels:

|      Label      | Reference |   Definition  |   `size`  |     `id`     |
|-----------------|-----------|---------------|-----------|--------------|
| `[!endnote]`    | ¹         | `<mf-note>`   | `"large"` | `endnote`    |
| `[^sidenote]`   | ²         | `<mf-note>`   |           | `sidenote`   |
| `[!Figure fig]` | Figure 1  | `<mf-figure>` | `"large"` | `Figure fig` |
| `[^Figure fig]` | Figure 2  | `<mf-figure>` |           | `Figure fig` |
| `[!図:fig]`     | 図1       | `<mf-figure>` | `"large"` | `図:fig`     |
| `[^図:fig]`     | 図2       | `<mf-figure>` |           | `図:fig`     |

- The **Label** column shows the raw source code.
- All reference tags are translated into `<mf-ref>` elements. The **Reference** column shows how a `<mf-ref>` is displayed.
- The contents of a floating element is wrapped by an element shown in the **Definition** column. This element has the attributes shown in the last two columns, **`size`** and **`id`**.

Unreferenced labels are omitted from the output.

[^jbopixra]:
    `«le pixra pe li □»` roughly means "the picture pertaining to number □" in [Lojban][].
    It could be written more concisely as `«le li □ pixra»`, which isn't supported by Markfront at this point.

[Lojban]: https://en.wikipedia.org/wiki/Lojban

# Markfront XML

## HTML elements

The following HTML elements are supported and styled appropriately.

- `<code>`
- `<ul>`, `<ol>`, `<ll>`
- `<dl>`, `<dt>`, `<dd>`

## Document — `<mf>`

~~~~~~~~~~~~xml
<mf>
<mf-title>Document title</mf-title>
</mf>
~~~~~~~~~~~~

- `class="no-sidenotes"` disables sidenotes. All `[^note]` are treated like `[!note]`.

## Header — `<mf-title>`

~~~~~~~~~~~~xml
<mf-title>I Have No Mouth and I Must Scream</mf-title>
<mf-lead>Harlan Ellison</mf-lead>
~~~~~~~~~~~~

`<mf-title>` inserts a document title. `<mf-lead>` inserts a subtitle and if it exists it must follow `<mf-title>`.

*Relevant Markfront Text tags*: `**title**`

## Lists

~~~~~~~~~~~~xml
<ul>
    <li><p>unordered list</p></li>
</ul>
<ol>
    <li><p>ordered list</p></li>
</ol>
<dl>
    <dt><p>caption</p></dt>
    <dd><p>decsription</p></dd>
</dl>
~~~~~~~~~~~~

HTML lists `<ul>` (unordered list), `<ol>` (ordered list), and `<dl>` (definition list) are supported.

`ul > li` may have one of the following CSS classes:

- `checked` indicates that a checked checkbox should be displayed next the item.
- `unchecked` indicates that an unchecked checkbox should be displayed next the item.

*Relevant Markfront Text tags*: `-` `+` `*` `[ ]` `[x]` and more

## Code blocks — `<mf-code>`

~~~~~~~~~~~~xml
<mf-codeblock>
    <mf-code type="Python input">&gt;&gt;&gt; x = [1, 2, 3, 4]
&gt;&gt;&gt; [y * 2 for y in x]</mf-code>
    <mf-code type="none output">[2, 4, 6, 8]</mf-code>
</mf-codeblock>
~~~~~~~~~~~~

**`<mf-code>`** displays a code block with syntax highlighting.
`type` attribute is a space-separated string and the first element indicates the syntax name used for syntax highlighting.

One or more `<mf-code>` elements can be wrapped by **`<mf-codeblock>`**.

!!! Warning
    `<mf-code>` is a block element that should not be confused with `<code>`, which is an inline element used to insert a inline code fragment.

!!! TODO: Yet to be written about...
    The semantics of the rest of `type` attribute value.

*Relevant Markfront Text tags*: `~~~~`–`~~~~`

## LaTeX equations — `<mf-eq>`

~~~~~~~~~~~~xml
<mf-eq-display>
    \Lo(X, \wo) = \Le(X, \wo) + \int_\Omega \Li(X, \wi) ~ f_X(\wi, \wo) ~ | \n \cdot \wi | ~ d\wi
</mf-eq-display>
<p>
    The LLVM target <i>triplet</i> is comprised of <i>five</i> elements.
    Therefore, <mf-eq>3 = 5</mf-eq>.
</p>
~~~~~~~~~~~~

`<mf-eq>` inserts an inline LaTeX equation. Similarly, `<mf-eq-display>` inserts a display LaTeX equation.

*Relevant Markfront Text tags*: `$inline$` `$$display$$`

## Floating elements

Floating elements have the following common attributes:

- The **`id`** attribute is used to reference the element from `<mf-ref>`.
- The optional attribute **`size="large"`** prevents the element to be layouted in a confined space like a margin for sidenotes.

### Figures — `<mf-figure>`

~~~~~~~~~~~~xml
<mf-figure id="figureId" counter="table" label="Table {}" size="large">
    <mf-figure-caption>
        Caption
    </mf-figure-caption>
    <p>
        Contents
    </p>
</mf-figure>
~~~~~~~~~~~~

- **`counter`** identifies a counter used to generate a figure number.
- **`label`** specifies the format of the displayed figure label. `{}` is substituted with a number.

If both of `counter` and `label` are omitted, they are implied from `id` provided that `id` is in a particular form.

- If `id.match(/(.+):[^ :]+/)`, then `counter` is `$1` and `label` is `$1{}`.
- If `id.match(/(.+) [^ :]+/)`, then `counter` is `$1` and `label` is `$1 {}`.

*Relevant Markfront Text tags*: `[^counter basename]: caption` `[!counter basename]: caption`

### Sidenotes/Endnotes — `<mf-note>`

~~~~~~~~~~~~xml
<mf-note id="noteId" size="large">
    <p>
        Contents
    </p>
</mf-note>
~~~~~~~~~~~~

*Relevant Markfront Text tags*: `[^noteId]: contents` `[!noteId]: contents`

### Figure/note references — `<mf-ref>`

~~~~~~~~~~~~xml
<mf-note id="noteId"> ... </mf-note>
<p>
    <mf-ref to="noteId" />
</p>
~~~~~~~~~~~~

*Relevant Markfront Text tags*: `[^noteId]` `[!noteId]`

## Admonitions — `<mf-admonition>`

~~~~~~~~~~~~xml
<mf-admonition type="danger">
    <mf-admonition-title>
        Can I have your attention please?!
    </mf-admonition-title>
    <p>
        The message follows...
    </p>
</mf-admonition>
~~~~~~~~~~~~

*Relevant Markfront Text tag*: `!!!`

## Diagrams — `<mf-diagram>`

]]>
<mf-codeblock>
<mf-code type="xml">&lt;mf-diagram&gt;&lt;![CDATA[<![CDATA[
 .---------.
 |  Server |<------.
 '----+----'       |
      |            |
      | DATA CYCLE |
      v            |
 .---------.  .----+----.
 | Security|  |  File   |
 | Policy  +->| Manager |
 '---------'  '---------'
]]>]]&gt;&lt;/mf-diagram&gt;</mf-code>
</mf-codeblock>
<![CDATA[

*Relevant Markfront Text tags*: TODO

## Miscellaneous elements

- `<mf-error>` indicates an error encountered while processing `<mf-text>`.

<!-- Markfront footer -->
]]></mf-text><script src="browser/markfront.js" data-rel="markfront" />
</head></html>
